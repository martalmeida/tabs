Models={},Models.velocityFrameSource=function(a,b,c){function e(b){a.extend(this,d,b),this._velocity_frames={},this.setBarbLocation(this.barbLocation)}function f(a,c,d,e,f){d=void 0==d?1:d;var g=b.relativeAngle(a,c),h=a[0]*(1-d)+c[0]*d,i=a[1]*(1-d)+c[1]*d,j=b.rotate([[h,i]],-g)[0],k=Math.pow(c[1]-a[1],2),l=Math.pow(c[0]-a[0],2),m=Math.sqrt(k+l)*e,n=m*Math.cos(f),o=m*Math.sin(f),p=j[1]-n,q=j[0]+o,r=j[0]-o,s=b.rotate([[q,p],j,[r,p]],g);return s}function g(a){return Number.isFinite(a)?Math.min(Math.max(a,0),1):(console.log("Invalid barbLocation ("+a+")"),1)}function h(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}var d={barbLocation:c.barbLocation,barbDescriptions:c.barbDescriptions,arrowHeadSize:c.arrowHeadSize,arrowHeadAngle:c.arrowHeadAngle};return VFS_proto=e.prototype,VFS_proto._getDataSnapshot=function(b,c,d){var e=b.length,g=[];0==h(d.u[0])&&(d.u=d.u.map(function(a){return a/100}),d.v=d.v.map(function(a){return a/100}));for(var i=0;i<e;i++){var j=d.v[i]*c*.5,k=d.u[i]*c*.5,l=[b[i][0]+j,b[i][1]+k],m=[b[i][0]-j,b[i][1]-k],n=f(m,l,this.barbPosition,this.arrowHeadSize,this.arrowHeadAngle);g.push([n[0],n[1]],[n[2],n[1]],[l,m])}return date=d.date,indx=d.inds,{date:date,vectors:g,indx:indx}},VFS_proto.setBarbLocation=function(b){this.barbPosition=g(this.barbDescriptions[b])},VFS_proto.withVelocityGridLocations=function(b,c){API.withVelocityGridLocationsJSON(b,function(a){void 0===c&&console.log("Callback undefined");for(var b=a.lat.length,d=new Array(b),e=0;e<b;e++)d[e]=[a.lat[e],a.lon[e]];c&&c(d)})},VFS_proto.withVelocityFrame=function(b,c){void 0===c&&console.log("Callback undefined");var d=this,e=b.mapScale,f=b.frame,g=b.points;void 0===d._velocity_frames[e]&&(d._velocity_frames[e]=[]),void 0===d._velocity_frames[e][f]?API.withVelocityFrameJSON(b,function(a){var b=d._getDataSnapshot(g,e,a);d._velocity_frames[e][f]=b,c&&c(b)}):c&&c(d._velocity_frames[e][f])},function(b){return new e(b)}}(jQuery,Trig,Config),Models.buoysFrameSource=function(a,b,c){function e(b){a.extend(this,d,b),this._buoys_frames={},this.setBarbLocation(this.barbLocation)}function f(a,c,d,e,f){d=void 0==d?1:d;var g=b.relativeAngle(a,c),h=a[0]*(1-d)+c[0]*d,i=a[1]*(1-d)+c[1]*d,j=b.rotate([[h,i]],-g)[0],k=Math.pow(c[1]-a[1],2),l=Math.pow(c[0]-a[0],2),m=Math.sqrt(k+l)*e,n=m*Math.cos(f),o=m*Math.sin(f),p=j[1]-n,q=j[0]+o,r=j[0]-o,s=b.rotate([[q,p],j,[r,p]],g);return s}function g(a){return Number.isFinite(a)?Math.min(Math.max(a,0),1):(console.log("Invalid barbLocation ("+a+")"),1)}function h(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}var d={barbLocation:c.barbLocation,barbDescriptions:c.barbDescriptions,arrowHeadSize:c.arrowHeadSize,arrowHeadAngle:c.arrowHeadAngle};return VFS_proto=e.prototype,VFS_proto._getDataSnapshot=function(b,c,d){var e=b.length,g=[];0==h(d.u[0])&&(d.u=d.u.map(function(a){return a}),d.v=d.v.map(function(a){return a}));for(var i=0;i<e;i++){var j=d.v[i]*c*1,k=d.u[i]*c*1,l=[b[i][0]+j,b[i][1]+k],m=[b[i][0]-0*j,b[i][1]-0*k],n=f(m,l,this.barbPosition,this.arrowHeadSize,this.arrowHeadAngle);g.push([n[0],n[1]],[n[2],n[1]],[l,m])}return date=d.date,indx=d.inds,{date:date,vectors:g,indx:indx}},VFS_proto.setBarbLocation=function(b){this.barbPosition=g(this.barbDescriptions[b])},VFS_proto.withBuoysGridLocations=function(b,c){API.withBuoysGridLocationsJSON(b,function(a){void 0===c&&console.log("Callback undefined");for(var b=a.lat.length,d=new Array(b),e=0;e<b;e++)d[e]=[a.lat[e],a.lon[e]];c&&c(d)})},VFS_proto.withBuoysFrame=function(b,c){void 0===c&&console.log("Callback undefined");var d=this,e=b.mapScale,f=b.frame,g=b.points;void 0===d._buoys_frames[e]&&(d._buoys_frames[e]=[]),void 0===d._buoys_frames[e][f]?API.withBuoysFrameJSON(b,function(a){var b=d._getDataSnapshot(g,e,a);d._buoys_frames[e][f]=b,c&&c(b)}):c&&c(d._buoys_frames[e][f])},function(b){return new e(b)}}(jQuery,Trig,Config),Models.saltFrameSource=function(a,b){function d(b){a.extend(this,c,b)}var c={};return SFS_proto=d.prototype,SFS_proto.withSaltFrame=function(b,c){API.withSaltFrameJSON(b,function(a){c&&c(a)})},function(b){return new d(b)}}(jQuery,Config),Models.temperatureFrameSource=function(a,b){function d(b){a.extend(this,c,b)}var c={};return TFS_proto=d.prototype,TFS_proto.withTemperatureFrame=function(b,c){API.withTemperatureFrameJSON(b,function(a){c&&c(a)})},function(b){return new d(b)}}(jQuery,Config),Models.speedFrameSource=function(a,b){function d(b){a.extend(this,c,b)}var c={};return PFS_proto=d.prototype,PFS_proto.withSpeedFrame=function(b,c){API.withSpeedFrameJSON(b,function(a){c&&c(a)})},function(b){return new d(b)}}(jQuery,Config),Models.radarFrameSource=function(a,b,c){function e(b){a.extend(this,d,b),this._radar_frames={},this.setBarbLocation(this.barbLocation)}function f(a,c,d,e,f){d=void 0==d?1:d;var g=b.relativeAngle(a,c),h=a[0]*(1-d)+c[0]*d,i=a[1]*(1-d)+c[1]*d,j=b.rotate([[h,i]],-g)[0],k=Math.pow(c[1]-a[1],2),l=Math.pow(c[0]-a[0],2),m=Math.sqrt(k+l)*e,n=m*Math.cos(f),o=m*Math.sin(f),p=j[1]-n,q=j[0]+o,r=j[0]-o,s=b.rotate([[q,p],j,[r,p]],g);return s}function g(a){return Number.isFinite(a)?Math.min(Math.max(a,0),1):(console.log("Invalid barbLocation ("+a+")"),1)}function h(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}var d={barbLocation:c.barbLocation,barbDescriptions:c.barbDescriptions,arrowHeadSize:c.arrowHeadSize,arrowHeadAngle:c.arrowHeadAngle};return RFS_proto=e.prototype,RFS_proto._getDataSnapshot=function(b,c,d){var e=b.length,g=[];0==h(d.u[0])&&(d.u=d.u.map(function(a){return a/100}),d.v=d.v.map(function(a){return a/100}));for(var i=0;i<e;i++){if(.5==d.u[i]&&.5==d.v[i])var j=0,k=0;else var k=d.v[i]*c*.5,j=d.u[i]*c*.5;var l=[b[i][0]+k,b[i][1]+j],m=[b[i][0]-k,b[i][1]-j],n=f(m,l,this.barbPosition,this.arrowHeadSize,this.arrowHeadAngle);g.push([n[0],n[1]],[n[2],n[1]],[l,m])}return date=d.date,indx=d.inds,{date:date,vectors:g,indx:indx}},RFS_proto.setBarbLocation=function(b){this.barbPosition=g(this.barbDescriptions[b])},RFS_proto.withRadarGridLocations=function(b,c){API.withRadarGridLocationsJSON(b,function(a){void 0===c&&console.log("Callback undefined");for(var b=a.lat.length,d=new Array(b),e=0;e<b;e++)d[e]=[a.lat[e],a.lon[e]];c&&c(d)})},RFS_proto.withRadarFrame=function(b,c){void 0===c&&console.log("Callback undefined");var d=this,e=b.mapScale,f=b.frame,g=b.points;void 0===d._radar_frames[e]&&(d._radar_frames[e]=[]),void 0===d._radar_frames[e][f]?API.withRadarFrameJSON(b,function(a){var b=d._getDataSnapshot(g,e,a);d._radar_frames[e][f]=b,c&&c(b)}):c&&c(d._radar_frames[e][f])},function(b){return new e(b)}}(jQuery,Trig,Config),Models.windFrameSource=function(a,b,c){function e(b){a.extend(this,d,b),this._wind_frames={},this.setBarbLocation(this.barbLocation)}function f(a,c,d,e,f){d=void 0==d?1:d;var g=b.relativeAngle(a,c),h=a[0]*(1-d)+c[0]*d,i=a[1]*(1-d)+c[1]*d,j=b.rotate([[h,i]],-g)[0],k=Math.pow(c[1]-a[1],2),l=Math.pow(c[0]-a[0],2),m=Math.sqrt(k+l)*e,n=m*Math.cos(f),o=m*Math.sin(f),p=j[1]-n,q=j[0]+o,r=j[0]-o,s=b.rotate([[q,p],j,[r,p]],g);return s}function g(a){return Number.isFinite(a)?Math.min(Math.max(a,0),1):(console.log("Invalid barbLocation ("+a+")"),1)}function h(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}var d={barbLocation:c.barbLocation,barbDescriptions:c.barbDescriptions,arrowHeadSize:c.arrowHeadSize,arrowHeadAngle:c.arrowHeadAngle};return WFS_proto=e.prototype,WFS_proto._getDataSnapshot=function(b,c,d){var e=b.length,g=[];0==h(d.u[0])&&(d.u=d.u.map(function(a){return a/100}),d.v=d.v.map(function(a){return a/100}));for(var i=0;i<e;i++){var j=d.v[i]*c*.5,k=d.u[i]*c*.5,l=[b[i][0]+j,b[i][1]+k],m=[b[i][0]-j,b[i][1]-k],n=f(m,l,this.barbPosition,this.arrowHeadSize,this.arrowHeadAngle);g.push([n[0],n[1]],[n[2],n[1]],[l,m])}return date=d.date,indx=d.inds,{date:date,vectors:g,indx:indx}},WFS_proto.setBarbLocation=function(b){this.barbPosition=g(this.barbDescriptions[b])},WFS_proto.withWindGridLocations=function(b,c){API.withWindGridLocationsJSON(b,function(a){void 0===c&&console.log("Callback undefined");for(var b=a.lat.length,d=new Array(b),e=0;e<b;e++)d[e]=[a.lat[e],a.lon[e]];c&&c(d)})},WFS_proto.withWindFrame=function(b,c){void 0===c&&console.log("Callback undefined");var d=this,e=b.mapScale,f=b.frame,g=b.points;void 0===d._wind_frames[e]&&(d._wind_frames[e]=[]),void 0===d._wind_frames[e][f]?API.withWindFrameJSON(b,function(a){var b=d._getDataSnapshot(g,e,a);d._wind_frames[e][f]=b,c&&c(b)}):c&&c(d._wind_frames[e][f])},function(b){return new e(b)}}(jQuery,Trig,Config);